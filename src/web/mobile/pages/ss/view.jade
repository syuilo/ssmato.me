extend ../../ui

block title
	if login
		= ss.title
	else
		= ss.title + ' - SSまとめ'

append meta
	meta(name='keywords', content='SS, SSまとめ')
	meta(name='description', content= summary)
	meta(property='og:title', content= ss.title + ' - SSまとめ')
	meta(property='og:type', content='article')
	meta(property='og:description', content= summary)
	meta(property='og:url', content= config.url + '/' + ss.id)
	meta(property='og:image', content= config.urls.resources + '/logo.jpg')
	meta(property='og:site_name', content='SSまとめ')
	meta(property='twitter:card', content='summary')
	meta(property='twitter:site', content='@syuilo')
	meta(property='twitter:title', content= ss.title + ' - SSまとめ')
	meta(property='twitter:description', content= summary)
	meta(property='twitter:image', content= config.urls.resources + '/logo.jpg')
	meta(property='twitter:url', content= config.url + '/' + ss.id)

block content
	main(role='main')
		article
			header
				div.body
					h1= ss.title
					div.info
						p.series
							span.caption シリーズ:
							if ss.series.length == 0
								span.unknown 不明
							else if ss.series.length == 1
								a(href= config.urls.series + '/' + ss.series[0].id)= ss.series[0].title
							else
								each series in ss.series
									a(href= config.urls.series + '/' + series.id)= series.title
								span.is-cross
									| (クロス)
			div.content
				div.body
					p.filter
						span.caption
							i.fa.fa-filter
							| フィルター:
						if filterMode == 'auto'
							span.mode.active 自動
						else
							a.mode(href= config.urls.api + '/set-filter?mode=auto&callback=' + url) 自動
						if filterMode == 'master'
							span.mode.active 本文だけ
						else
							a.mode(href= config.urls.api + '/set-filter?mode=master&callback=' + url) 本文だけ
						if filterMode == 'none'
							span.mode.active なし
						else
							a.mode(href= config.urls.api + '/set-filter?mode=none&callback=' + url) なし
					div.posts
						each post in posts
							- var popularity = '';
							- if (!post.isMaster) {
							-   if (post.popularity > 25) popularity = 'c';
							-   if (post.popularity > 50) popularity = 'b';
							-   if (post.popularity > 75) popularity = 'a';
							- }
							article.post(id= post.number, data-id= post.id, data-popularity= popularity)
								header
									a.number(href= '#' + post.number)= post.number
									h2.name= post.userName
									time.time(datetime= post.createdAt.toISOString())= post.displayCreatedAt
									span.id(style='background:' + post.userIdBackgroundColor + ';color:' + post.userIdForegroundColor)= post.userId
								div.body
									div.text!= post.html
									div.actions
										button.like
											i.fa.fa-thumbs-o-up
										button.dislike
											i.fa.fa-thumbs-o-down
					
			footer
				div.body
					small.source
						if ss.url.indexOf('http://ex14.vip2ch.com/') == 0
							| SS速報VIPに投稿されたスレッドの紹介です
							a(href= ss.url, target='_blank')
								| 【SS速報VIP】
								= ss.title
								|  
								= ss.url
						else
							| 元スレッド
							a(href= ss.url, target='_blank')= ss.url
